<!--
author: W3layouts
author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Driving School a Business Category Flat Bootstrap Responsive Website Template | Icons :: w3layouts</title>
    <!-- custom-theme -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="Driving School Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- //custom-theme -->
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all"/>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <!-- js -->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script src="js/main.js"></script>
    <!-- //js -->
    <!-- font-awesome-icons -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <!-- //font-awesome-icons -->
    <link href="//fonts.googleapis.com/css?family=Prompt:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=latin-ext,thai,vietnamese"
          rel="stylesheet">
    <script src="/js/token.js"></script>
</head>
<body>
<!-- banner -->
<div class="header">
    <div class="header_left">
        <ul>
            <li><span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>New York</li>
            <li><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>+123 456 7890</li>
        </ul>
    </div>
    <div class="header_right">
        <div class="w3_agile_login">
            <div class="cd-main-header">
                <a class="cd-search-trigger" href="#cd-search"> <span></span></a>
                <!-- cd-header-buttons -->
            </div>
            <div id="cd-search" class="cd-search">
                <form action="#" method="post">
                    <input name="Search" type="search" placeholder="Search...">
                </form>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>

</div>
<div class="header-bottom">
    <nav class="navbar navbar-default">
        <div class="navbar-header navbar-left">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <h1><a class="navbar-brand" href="index.html"><span>驾驶</span>学校</a></h1>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-right" id="bs-example-navbar-collapse-1">
            <nav class="link-effect-2" id="link-effect-2">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="toIndex"><span data-hover="Home">主页</span></a></li>
                    <li><a href="/toAbout"><span data-hover="About">关于</span></a></li>
                    <li><a href="/toLessons"><span data-hover="Lessons">训练</span></a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span
                                data-hover="Short Codes">约车</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu agile_short_dropdown">
                            <li><a href="#">在线学车</a></li>
                            <li><a href="toTypography">电话约车</a></li>
                        </ul>
                    </li>
                    <li><a href="/toMail"><span data-hover="Mail Us">邮寄我们</span></a></li>
                </ul>
            </nav>
        </div>
        <div class="agileinfo-social-grids">
            <ul>
                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                <li><a href="#"><i class="fa fa-rss"></i></a></li>
            </ul>
        </div>
    </nav>
</div>
<div class="banner1">
</div>
<!-- //banner -->
<!-- icons -->
<div class="w3_wthree_agileits_icons main-grid-border">
    <div class="container">
        <div class="w3l-heading">
            <h2 class="w3ls_head">约车详细信息</h2>
        </div>

        <input type="hidden" id="coachId" th:value="${coachId}">
        <div class="icons">
            <h3 class="agileits-icons-title">开启美好的一天</h3>
            <center>
                车号：<span style="color: red" th:text="${detail.car.carNum}"></span> &nbsp; &nbsp; &nbsp; &nbsp;
                教练名称：<span style="color: red" th:text="${detail.coathName}"></span> &nbsp; &nbsp; &nbsp; &nbsp;
                电话：<span style="color: red" th:text="${detail.coachtel}"></span>
                <table class="table table-bordered" id="yueche">
                    <tr class="warning">
                        <td>日期</td>
                        <td>8:00-12:00</td>
                        <td>12:00-15:00</td>
                        <td>15:00-18:00</td>
                    </tr>
                </table>
                <button type="button" id="add" class="btn btn-primary">预约</button>
            </center>
            <div class="agileits-w3layouts-copyright">
                <p>© 2017 Driving School . All Rights Reserved | Design by <a href="#">
                    W3layouts</a></p>
            </div>
            <!-- //footer -->

            <!-- start-smooth-scrolling -->
            <script type="text/javascript" src="js/move-top.js"></script>
            <script type="text/javascript" src="js/easing.js"></script>
            <script type="text/javascript">
                jQuery(document).ready(function ($) {
                    $(".scroll").click(function (event) {
                        event.preventDefault();
                        $('html,body').animate({scrollTop: $(this.hash).offset().top}, 1000);
                    });
                });
            </script>
            <!-- start-smooth-scrolling -->
            <!-- for bootstrap working -->
            <script src="js/bootstrap.js"></script>
            <!-- //for bootstrap working -->
            <!-- here stars scrolling icon -->
            <script type="text/javascript">
                $(document).ready(function () {
                    /*
                        var defaults = {
                        containerID: 'toTop', // fading element id
                        containerHoverID: 'toTopHover', // fading element hover id
                        scrollSpeed: 1200,
                        easingType: 'linear'
                        };
                    */

                    $().UItoTop({easingType: 'easeOutQuart'});

                });

                function laterDay(num) {
                    var t = new Date();
                    var iToDay = t.getDate();//日
                    var iToMon = t.getMonth();
                    var iToYear = t.getFullYear();
                    var iToday = t.getDay();//星期
                    var weeks = ["日", "一", "二", "三", "四", "五", "六"];
                    var arr = [];
                    for (var i = 1; i < num + 1; i++) {
                        var newDate = new Date(iToYear, iToMon, (iToDay + i));
                        arr.push(newDate.getMonth() + 1 + "月" + newDate.getDate() + "日")
                    }
                    return arr;
                }

                function laterDay2(num) {
                    var t = new Date();
                    var iToDay = t.getDate();//日
                    var iToMon = t.getMonth();
                    var iToYear = t.getFullYear();
                    var iToday = t.getDay();//星期
                    var weeks = ["日", "一", "二", "三", "四", "五", "六"];
                    var arr = [];
                    for (var i = 1; i < num + 1; i++) {
                        var newDate = new Date(iToYear, iToMon, (iToDay + i));
                        arr.push(newDate.getFullYear() + "-" + (newDate.getMonth() + 1) + "-" + newDate.getDate())
                    }
                    return arr;
                }

                $(function () {
                    var array = laterDay(7);
                    var array2 = laterDay2(7)
                    var coachId = $("#coachId").val();
                    for (var i = 0; i < array.length; i++) {
                        var array3 = i;
                        /* alert(array3)*/
                        $("#yueche").append(" <tr class=‘info’>\n" +
                            "                        <td style='color: red'> <strong>" + array[i] + "</strong></td>\n" +
                            "                        <td class='eight" + array3 + "'>\n" +
                            "                            <input type=\"checkbox\"value='" + array2[i] + ",a'  name='hobby'>可约\n" +
                            "                        </td >\n" +
                            "                        <td class='twelve" + array3 + "'> <input type=\"checkbox\" value='" + array2[i] + ",b' name='hobby'>可约</td>\n" +
                            "                        <td class='fifteen" + array3 + "'> <input type=\"checkbox\" value='" + array2[i] + ",c' name='hobby'>可约</td>\n" +
                            "                    </tr>");
                        $.ajax({
                            type: 'POST',
                            url: 'queryAllAbout',
                            async: false,
                            data: {'coachId': coachId, "aboutDate": array2[i]},

                            success: function (result) {
                                $.each(result, function (index, i) {
                                    if (i.eight == 'yes') {
                                        $(".eight" + array3).html("不可约")
                                    }
                                    if (i.twelve == 'yes') {
                                        $(".twelve" + array3).html("不可约")
                                    }
                                    if (i.fifteen == 'yes') {
                                        $(".fifteen" + array3).html("不可约")
                                    }
                                })

                            }
                        })
                    }

                    //提交
                    $("#add").click(function () {
                        var token = getToken();
                        var cookieArray = token.split("-");
                        var userId = cookieArray[2];
                        var obj = document.getElementsByName("hobby");
                        var check_val = [];
                        for (k in obj) {
                            if (obj[k].checked)
                                check_val.push(obj[k].value);
                        }
                        var checkLen=check_val.length;
                        $.post("queryCountAbout", "userId=" + userId, function (result) {
                            if (result >3-checkLen) {
                                alert("您的预约已经到了上限");

                            } else {
                                alert("预约成功");
                                if (check_val.length > 1) {
                                    //如果选多个
                                    for (var i = 0; check_val.length; i++) {
                                        var aboutDate = check_val[i];
                                        var data = aboutDate.split(",");
                                        var a = data[0];
                                        var str = data[1];
                                        $.ajax({
                                            type: 'POST',
                                            url: 'addAbout',
                                            async: false,
                                            data: {
                                                'aboutDate': a, 'coachId': coachId, 'userId': userId,
                                                'str': str
                                            },
                                            success: function (result) {
                                            }
                                        })
                                    }
                                } else {
                                    //如果选一个
                                    var aboutDate = check_val[0];
                                    var data = aboutDate.split(",");
                                    var a = data[0];
                                    var str = data[1];
                                    $.post("addAbout", "aboutDate=" + a + "&coachId=" + coachId +
                                        "&userId=" + userId + "&str=" + str, function (result) {
                                    })
                                }
                            }
                        })
                    })

                    $('input[type=checkbox]').click(function () {//checkbox的input标签点击事件
                        $("input[name='hobby']").attr('disabled', true);//设置name为apk[]的input标签的属性为true,表示不可选
                        if ($("input[name='hobby']:checked").length >= 3) {//选中个数大于3
                            $("input[name='hobby']:checked").attr('disabled', false);
                        } else {
                            $("input[name='hobby']").attr('disabled', false);
                        }
                    });


                })

            </script>
            <!-- //here ends scrolling icon -->
</body>
</html>